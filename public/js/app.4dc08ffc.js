(function(t){function e(e){for(var o,i,r=e[0],c=e[1],u=e[2],d=0,p=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"047f":function(t,e,a){},"28fd":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t.getIsAuth&&!t.getIsLoading?a("Video"):t.getIsAuth||t.getIsLoading?a("div",{staticClass:"spinner"},[a("p",{staticClass:"spinner_text"},[t._v(" Loading ")]),a("pulse-loader",{staticClass:"spinner_dot",attrs:{loading:t.getIsLoading,color:"#a46bfe",size:"15px"}})],1):a("Auth")],1)},s=[],i=a("5530"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.notVideo?a("div",{staticClass:"no_camera"},[t._v(" Для работы приложения необходима вебкамера и Chrome ")]):a("div",{staticClass:"wrapper"},[a("video",{directives:[{name:"show",rawName:"v-show",value:!t.showVideo,expression:"!showVideo"}],ref:"small_video",staticClass:"video small",attrs:{id:"video",width:"200",height:"100",autoplay:""}}),!t.showVideo&&t.getTemp?a("Result",{staticClass:"result",attrs:{temp:t.getTemp}}):t._e(),a("video",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],ref:"video",staticClass:"video",attrs:{id:"video",width:"1280",height:"760",autoplay:""}}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.showVideo,expression:"!showVideo"}],ref:"canvas",staticClass:"video canvas",attrs:{id:"canvas",width:"1013",height:"760"}}),a("svg",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],staticClass:"dot",attrs:{width:"70",height:"70",viewBox:"0 0 70 70",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{attrs:{opacity:"0.2",cx:"35",cy:"35",r:"35",fill:"#FF6363"}}),a("circle",{attrs:{opacity:"0.4",cx:"35",cy:"35",r:"25",fill:"#FF6363"}}),a("circle",{attrs:{cx:"35",cy:"35",r:"15",fill:"#FF6363"}})]),a("svg",{directives:[{name:"show",rawName:"v-show",value:t.showVideo,expression:"showVideo"}],staticClass:"mask",attrs:{width:"403",height:"551",viewBox:"0 0 403 551",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M60.8769 454.632C48.852 434.103 43.5783 410.066 41.4332 369.485C41.3539 367.986 41.2789 366.463 41.208 364.917C39.8111 365.835 38.5154 366.581 37.3096 367.158C33.4037 369.027 30.4412 369.133 28.0381 367.645C24.8924 365.697 22.7042 361.021 20.6092 353.998C18.8871 348.225 17.3718 342.18 15.9546 336.101C15.032 332.143 14.1511 328.17 13.2814 324.247C12.8155 322.146 12.3529 320.06 11.8888 317.998C11.2464 315.143 10.5949 312.37 9.95605 309.651C8.57619 303.777 7.25482 298.153 6.20906 292.489C4.67875 284.203 3.73802 275.833 4.06467 266.474C4.24007 261.447 4.8461 256.433 6.26017 252.28C7.67425 248.128 9.89776 244.837 13.3081 243.255C15.9287 242.039 18.3076 242.746 20.4636 244.472C22.6192 246.197 24.5528 248.941 26.2813 251.799L31.5486 258.455C31.3715 256.052 31.1857 253.67 30.9939 251.309C30.4834 245.02 29.9306 238.873 29.3878 232.837C27.6509 213.521 26.0157 195.336 26.1895 177.275C26.4381 151.449 30.3859 125.873 43.0243 97.5966C57.6552 64.8618 79.7283 42.8164 106.458 28.3039C166.143 -4.1013 236.857 -4.1013 296.542 28.3039C323.272 42.8164 345.345 64.8622 359.976 97.5966C372.614 125.873 376.562 151.449 376.81 177.275C376.984 195.334 375.349 213.517 373.613 232.831C373.07 238.87 372.517 245.019 372.006 251.309C371.814 253.67 371.628 256.052 371.451 258.455L376.719 251.799C378.448 248.941 380.381 246.197 382.536 244.471C384.692 242.746 387.071 242.04 389.692 243.255C393.103 244.837 395.325 248.128 396.74 252.28C398.154 256.433 398.76 261.447 398.935 266.474C399.262 275.833 398.321 284.203 396.791 292.489C395.745 298.153 394.424 303.778 393.044 309.651C392.405 312.371 391.754 315.143 391.111 317.998C390.65 320.048 390.19 322.122 389.727 324.211C388.855 328.145 387.971 332.13 387.045 336.101C385.629 342.18 384.113 348.224 382.391 353.998C380.296 361.021 378.108 365.697 374.962 367.644C372.558 369.132 369.596 369.027 365.69 367.157C364.485 366.58 363.189 365.835 361.792 364.917C361.721 366.463 361.646 367.985 361.567 369.485C359.422 410.066 354.148 434.103 342.123 454.632C330.199 474.991 311.635 491.901 282.898 518.075C281.586 519.271 280.252 520.485 278.897 521.721C266.844 532.707 254.537 539.127 241.723 542.703C221.193 548.432 181.807 548.432 161.277 542.704C148.463 539.127 136.156 532.707 124.103 521.721C122.749 520.486 121.416 519.273 120.105 518.078C91.367 491.902 72.802 474.992 60.8769 454.632ZM365.468 371.422C369.527 373.046 373.465 373.275 377.067 371.045C379.494 369.543 381.244 367.19 382.612 364.583C383.991 361.957 385.148 358.747 386.224 355.141C387.979 349.258 389.515 343.125 390.941 337.009C391.871 333.019 392.764 328.993 393.639 325.044C394.101 322.961 394.558 320.899 395.014 318.876C395.637 316.106 396.278 313.378 396.911 310.681C398.303 304.756 399.661 298.976 400.724 293.216C402.291 284.733 403.272 276.061 402.933 266.335C402.752 261.138 402.123 255.678 400.527 250.991C398.939 246.332 396.188 241.859 391.376 239.626C389.324 238.675 387.209 238.424 385.149 238.839C383.155 239.241 381.449 240.218 380.037 241.348C378.769 242.363 377.609 243.608 376.555 244.941C376.891 241.059 377.236 237.217 377.578 233.41C379.323 213.999 380.986 195.503 380.81 177.236C380.558 150.976 376.533 124.837 363.628 95.9644C348.625 62.3995 325.925 39.7052 298.451 24.7886C237.575 -8.26285 165.425 -8.26287 104.549 24.7886C77.0754 39.7052 54.3746 62.399 39.3725 95.9644C26.4675 124.838 22.4425 150.975 22.1897 177.236C22.0139 195.505 23.6768 214.002 25.4221 233.416C25.7641 237.22 26.1093 241.06 26.4444 244.94C25.3904 243.608 24.231 242.364 22.9631 241.349C21.5508 240.218 19.8451 239.242 17.8512 238.839C15.7916 238.424 13.6769 238.674 11.6251 239.626C6.81238 241.858 4.06075 246.33 2.47371 250.991C0.877493 255.679 0.248406 261.138 0.0670995 266.335C-0.272388 276.061 0.708846 284.732 2.27555 293.215C3.33907 298.975 4.69682 304.755 6.08855 310.68C6.72231 313.378 7.36312 316.106 7.9864 318.876C8.44452 320.911 8.90444 322.986 9.36912 325.081C10.2421 329.019 11.132 333.032 12.059 337.009C13.4848 343.125 15.021 349.258 16.7761 355.141C17.8519 358.747 19.0093 361.957 20.3878 364.584C21.7557 367.19 23.5061 369.544 25.9329 371.046C29.5346 373.276 33.4729 373.046 37.5324 371.422C39.7466 411.19 45.0935 435.6 57.4254 456.654C69.6678 477.555 88.6727 494.863 117.101 520.753C118.514 522.039 119.949 523.347 121.408 524.677C133.924 536.084 146.785 542.812 160.202 546.557C170.966 549.56 186.354 551 201.5 551C216.646 551 232.034 549.56 242.798 546.556C256.215 542.812 269.077 536.084 281.592 524.677C283.052 523.346 284.488 522.038 285.902 520.751C314.329 494.862 333.333 477.555 345.575 456.654C357.907 435.6 363.253 411.19 365.468 371.422Z",fill:"white"}})]),a("button",{staticClass:"button button_main button_main-start",attrs:{id:"snap"},on:{click:t.makeFoto}},[t._v(" "+t._s(t.showVideo?"Check Temp":"Return")+" ")])],1)},c=[],u=a("2f62"),l=a("11c1"),d=a.n(l),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"result",class:{"result-good":2===t.getData.status,"result-low":0===t.getData.status,"result-bad":1===t.getData.status}},[a("div",{staticClass:"icon",class:2===t.getData.status?"icon-good":"icon-bad"}),a("div",{staticClass:"temp"},[t._v(" "+t._s(t.temp)+" "),a("span",{staticClass:"temp_deg"},[t._v("°C")])]),a("div",{staticClass:"text"},[t._v(" "+t._s(t.getData.text)+" ")])])},h=[],m=(a("a9e3"),{GOOD:"Ваша температура в норме!",BAD:"У Вас повышенная температура!",LOW:"У Вас пониженная температура!"});function f(t){return t<35.5?0:t>=37.2?1:2}var g={name:"Result",props:{temp:{type:Number}},computed:{getData:function(){var t=f(this.temp);switch(t){case 0:return{status:t,text:m.LOW};case 1:return{status:t,text:m.BAD};default:return{status:t,text:m.GOOD}}}}},v=g,C=(a("9f75"),a("2877")),w=Object(C["a"])(v,p,h,!1,null,"4800a652",null),b=w.exports,_={name:"Video",components:{Result:b},props:{},data:function(){return{video:null,canvas:null,smallVideo:null,notVideo:!1}},mounted:function(){var t=this;this.video=this.$refs.video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){t.video.srcObject=e,t.video.play()})):this.notVideo=!0},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])("app",["getTemp","getShowVideo"])),{},{showVideo:{get:function(){return this.getShowVideo},set:function(t){this.setShowVideo({meta:d()(),data:t})}}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])("app",["setPhoto","setTemp","setShowVideo"])),{},{makeFoto:function(){if(this.showVideo){this.smallVideoShow(),this.canvas=this.$refs.canvas;var t=this.canvas.getContext("2d");t.drawImage(this.video,0,0,1013,760),this.setPhoto({meta:d()(),data:this.canvas.toDataURL("image/jpeg")})}else this.showVideo=!0},smallVideoShow:function(){var t=this;this.smallVideo=this.$refs.small_video,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){t.smallVideo.srcObject=e,t.smallVideo.play()}))}})},O=_,T=(a("f9b4"),Object(C["a"])(O,r,c,!1,null,"26b5715e",null)),S=T.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth"},[a("form",{staticClass:"form"},[a("p",{staticClass:"header"},[t._v(" Вход ")]),a("label",{staticClass:"label"},[a("span",{staticClass:"text"},[t._v(" Email ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"input",attrs:{type:"text",placeholder:"email@mail.ru",autocomplete:"off"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}})]),a("label",{staticClass:"label"},[a("span",{staticClass:"text"},[t._v(" Password ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"password",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),a("button",{staticClass:"button button_main",attrs:{disabled:t.disabledButton()||!t.loginValid()},on:{click:function(e){return e.preventDefault(),t.auth(e)}}},[t._v(" LogIn ")])])])},V=[],P=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,j={name:"Auth",data:function(){return{disabled:!0}},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])("login",["getLogin","getPassword"])),{},{login:{get:function(){return this.getLogin},set:function(t){this.setLogin({meta:d()(),data:t})}},password:{get:function(){return this.getPassword},set:function(t){this.setPassword({meta:d()(),data:t})}}}),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])("login",["setLogin","setPassword","setAuth"])),{},{auth:function(){this.setAuth({meta:d()()})},disabledButton:function(){return!this.getLogin||!this.getPassword},loginValid:function(){return P.test(this.getLogin)}})},x=j,y=(a("725b"),Object(C["a"])(x,E,V,!1,null,"6cfcf9de",null)),L=y.exports,A=a("8a5d"),I={name:"App",components:{Video:S,Auth:L,PulseLoader:A["a"]},computed:Object(i["a"])(Object(i["a"])({},Object(u["c"])("app",["getIsAuth","getIsLoading"])),{},{isAuth:function(){return this.getIsAuth}})},D=I,k=(a("5c0b"),Object(C["a"])(D,n,s,!1,null,null,null)),M=k.exports,H={namespaced:!0,state:{photo:null,temp:null,showVideo:!0,checkTemp:null,isAuth:!1,isLoading:!1},actions:{setIsLoading:function(t,e){var a=t.commit;return a("SET_IS_LOADING",e)},setIsAuth:function(t,e){var a=t.commit;return a("SET_IS_AUTH",e)},setCheckTemp:function(t,e){var a=t.commit;return a("SET_CHECK_TEMP",e)},setPhoto:function(t,e){var a=t.commit;return a("SET_PHOTO",e)},setTemp:function(t,e){var a=t.commit;return a("SET_TEMP",e)},setShowVideo:function(t,e){var a=t.commit;return a("SET_SHOW_VIDEO",e)}},mutations:{SET_IS_LOADING:function(t,e){t.isLoading=e.data},SET_IS_AUTH:function(t,e){t.isAuth=e.data},SET_CHECK_TEMP:function(){},SET_PHOTO:function(t,e){t.photo=e.data},SET_TEMP:function(t,e){t.temp=e.data},SET_SHOW_VIDEO:function(t,e){t.showVideo=e.data}},getters:{getIsLoading:function(t){return t.isLoading},getIsAuth:function(t){return t.isAuth},getPhoto:function(t){return t.photo},getTemp:function(t){return t.temp},getShowVideo:function(t){return t.showVideo}}},N={namespaced:!0,state:{login:"",password:""},actions:{setLogin:function(t,e){var a=t.commit;return a("SET_LOGIN",e)},setPassword:function(t,e){var a=t.commit;return a("SET_PASSWORD",e)},setAuth:function(t,e){var a=t.commit;return a("SET_AUTH",e)}},mutations:{SET_AUTH:function(){},SET_LOGIN:function(t,e){t.login=e.data},SET_PASSWORD:function(t,e){t.password=e.data}},getters:{getLogin:function(t){return t.login},getPassword:function(t){return t.password}}},z=(a("d3b7"),a("96cf"),a("1da1")),U=a("d4ec"),$=a("ade3"),R=function t(e){var a=this;Object(U["a"])(this,t),Object($["a"])(this,"call",function(){var t=Object(z["a"])(regeneratorRuntime.mark((function t(e,o,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(a.host+e,{method:"POST",headers:n?Object(i["a"])(Object(i["a"])({},a.headers),{},{Authorization:n}):a.headers,body:JSON.stringify(o)}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(){throw new Error("Error")})));case 1:case"end":return t.stop()}}),t)})));return function(e,a,o){return t.apply(this,arguments)}}()),console.log(e),this.host=e,this.headers={"Content-Type":"application/json"}},F=new R("http://localhost:3000/api/"),W=function(){return function(t){var e=t.dispatch,a=t.getters,o=null;t.subscribe((function(t){var n=t.payload;switch(t.type){case"app/SET_CHECK_TEMP":F.call("getTemp",{},a["app/getIsAuth"]).then((function(t){if(t.error)throw new Error(t.error);setTimeout((function(){e("app/setTemp",{meta:n.meta,data:t.data}),e("app/setShowVideo",{meta:n.meta,data:!1})}),1e3)})).catch((function(t){return console.log(t)}));break;case"app/SET_PHOTO":if(!n.data)return;e("app/setCheckTemp",{meta:n.meta});break;case"app/SET_TEMP":if(n.data){var s=f(n.data),i=n.meta;F.call("data",{photo:a["app/getPhoto"],status:s,temp:a["app/getTemp"]},a["app/getIsAuth"]).then((function(t){if(console.log(t),t.error)throw new Error(t.error);e("app/setPhoto",{meta:n.meta,data:null})})).catch((function(t){return console.log(t)})),o=setTimeout((function(){e("app/setShowVideo",{meta:i,data:!0}),e("app/setTemp",{meta:i,data:null})}),5e3)}break;case"app/SET_SHOW_VIDEO":n.data&&(e("app/setTemp",{meta:n.meta,data:null}),o&&(clearTimeout(o),o=null));break;case"login/SET_AUTH":e("app/setIsLoading",{meta:n.meta,data:!0}),F.call("auth",{email:a["login/getLogin"],password:a["login/getPassword"]}).then((function(t){if(t.error)throw new Error(t.error);setTimeout((function(){e("app/setIsLoading",{meta:n.meta,data:!1}),e("app/setIsAuth",{meta:n.meta,data:t.token}),e("login/setLogin",{meta:n.meta,data:""}),e("login/setPassword",{meta:n.meta,data:""})}),2e3)})).catch((function(t){setTimeout((function(){e("app/setIsLoading",{meta:n.meta,data:!1}),e("login/setLogin",{meta:n.meta,data:""}),e("login/setPassword",{meta:n.meta,data:""}),console.log(t)}),2e3)}));break}}))}};o["a"].use(u["a"]);var B=new u["a"].Store({modules:{app:H,login:N},plugins:[W()]});o["a"].config.productionTip=!1,new o["a"]({store:B,render:function(t){return t(M)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var o=a("9c0c"),n=a.n(o);n.a},"725b":function(t,e,a){"use strict";var o=a("047f"),n=a.n(o);n.a},"80d1":function(t,e,a){},"9c0c":function(t,e,a){},"9f75":function(t,e,a){"use strict";var o=a("28fd"),n=a.n(o);n.a},f9b4:function(t,e,a){"use strict";var o=a("80d1"),n=a.n(o);n.a}});
//# sourceMappingURL=app.4dc08ffc.js.map